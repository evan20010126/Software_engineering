<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FBL早餐店(Owner)</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- button -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- icon -->
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <!-- switch toggle -->
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

    <style>
        body {
            font-family: 微軟正黑體;
        }
        
        .btn_trash {
            background-color: white;
            border: none;
            color: black;
            padding: 3px 7px;
            font-size: 16px;
            cursor: pointer;
        }
        /* Darker background on mouse-over */
        
        .btn_trash:hover {
            color: white;
            background-color: red;
        }
        
        .btn_trash2 {
            background-color: white;
            border: none;
            color: black;
            padding: 1px 4px;
            font-size: 8px;
            cursor: pointer;
        }
        /* Darker background on mouse-over */
        
        .btn_trash2:hover {
            color: white;
            background-color: red;
        }
    </style>
    <style>
        .switch {
            position: relative;
            display: inline-block;
            width: 30px;
            height: 17px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 13px;
            width: 13px;
            left: 2px;
            bottom: 2.2px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }
        
        input:checked+.slider {
            background-color: #2196F3;
        }
        
        input:focus+.slider {
            box-shadow: 0 0 1px #2196F3;
        }
        
        input:checked+.slider:before {
            -webkit-transform: translateX(13px);
            -ms-transform: translateX(13px);
            transform: translateX(13px);
        }
        /* Rounded sliders */
        
        .slider.round {
            border-radius: 17px;
        }
        
        .slider.round:before {
            border-radius: 50%;
        }
        /* loading */
        
        #preloader {
            /*   這是整個會蓋住畫面的底色色塊  */
            position: fixed;
            width: 100%;
            height: 100%;
            left: 0%;
            top: 0%;
            background-color: #fff;
            z-index: 9999;
        }
        
        #status {
            /*   這是中間loading的gif坐標css,我們盡量讓他畫面置中  */
            position: fixed;
            width: 218px;
            height: 419px;
            margin-left: 520px;
            margin-top: 170px;
        }
        
        .add_button {
            border: 0px;
            background-color: white;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="visitor_index.html">FBL</a>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
					<span class="sr-only">導覽按鈕</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
            </div>
            <!-- <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
		    <li><a href="dance00.html">首頁</a></li>
            <li class="active"><a href="dance01.html">心得</a></li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
              圖/影 <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="dance02.html">圖片</a></li>
                <li><a href="dance03.html">影集</a></li>
              </ul>
            </li>
          </ul>
		  
		  <!-- <form class="navbar-form navbar-right">
			<div class="form-group has-feedback">
				<input type="search" class="form-control" placeholder="search"><span class="glyphicon-search form-control-feedback"></span>
			</div>
			<button type="submit" class="btn btn-default">搜尋</button>
		  </form> 
		</div> -->
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="store_owner_manage.html">Manage Menu</a></li>
                    <li><a href="owner_customer_manage.html">顧客資訊</a></li>
                    <li><a href="owner_order.html">檢視訂單</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                            <span style="padding-right: 10px; color: navy;" id="hi">Hi!</span><img src="img/Setting_icon.png" width="30px"> <span class="caret"></span></a>
                        <ul class="dropdown-menu" id="logInOut">
                            <!-- <li><a href="Account_Setting.html">Account Setting</a></li> -->
                            <!-- <li><a href="preference.html">My preference Setting</a></li> -->
                            <!-- <li><a href="store_owner_sign_in.html">Sign in</a></li> -->
                            <!-- <li><a href="#" onclick="signout()">Sign out</a></li> -->
                        </ul>
                    </li>
                </ul>
                <!-- <form class="navbar-form navbar-right">
              <div class="form-group has-feedback">
                  <input type="search" class="form-control" placeholder="search"><span class="glyphicon-search form-control-feedback"></span>
              </div>
              <button type="submit" class="btn btn-default">搜尋</button>
            </form> -->
            </div>
        </div>
    </nav>

    <!--頁首-->
    <header>
        <div class="container">
            <h1>管理菜單</h1>
            <p class="lead"></p>
            <hr>
        </div>
    </header>
    <!--內容區-->
    <div class="container">
        <div class="row">
            <article>
                <div class="col-sm-8">
                    <div>
                        <form class="navbar-form navbar-right">
                            <div class="form-group has-feedback">
                                <input type="search" class="form-control" placeholder="search" onkeyup="searching_function(this.value)">
                            </div>
                            <!-- <button type="submit" class="btn btn-default" onclick="searching_function(this.value)">搜尋</button> -->
                        </form>
                        <h1 style="font-family:微軟正黑體 ; text-align:center"> <button data-toggle="modal" data-target="#exampleModal3" style="float: left;" class="add_button"><svg   xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-patch-plus" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5z"/>
							<path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"/>
						  </svg></button>ღMenuღ</h1>

                    </div>
                    <hr>
                    <!-- 這邊是餐點 -->
                    <p id="menu">

                    </p>
                    <!-- <div class="col-sm-4">
						<div class="thumbnail">
							<img src="img\\demo.png" alt="2" width="400" height="300">
							<p><strong>Paris</strong></p>
							<p>Friday 27 November 2015</p>
							<button class="btn" data-toggle="modal" data-target="#myModal">Buy Tickets</button>
						</div>
					</div>
					<div class="col-sm-4">
						<div class="thumbnail">
							<img src="img\\demo.png" alt="2" width="400" height="300">
							<p><strong>Paris</strong></p>
							<p>Friday 27 November 2015</p>
							<button class="btn" data-toggle="modal" data-target="#myModal">Buy Tickets</button>
						</div>
					</div>
					<div class="col-sm-4">
						<div class="thumbnail">
							<img src="img\\demo.png" alt="2" width="400" height="300">
							<p><strong>Paris</strong></p>
							<p>Friday 27 November 2015</p>
							<button class="btn" data-toggle="modal" data-target="#myModal">Buy Tickets</button>
						</div>
					</div> -->
                    <!--  -->
                    <center>
                        <div class="col-sm-12">
                            <ul class="pagination">
                                <li><a onclick="page1()">1</a></li>
                                <li><a onclick="page2()">2</a></li>
                                <li><a onclick="page3()">3</a></li>
                                <li><a onclick="page4()">4</a></li>
                                <li><a onclick="page5()">5</a></li>
                            </ul>
                        </div>
                    </center>
                </div>
            </article>

            <aside>
                <div class="col-sm-3 col-sm-offset-1">
                    <!-- <div class="panel panel-success">
						<div class="panel-heading">
							<h3>購物車</h3>
						</div>
						<div class="panel-body">
							<ul>
								<li>商品</li>
								<li>商品</li>
								<li>商品</li>
								<li>寒假：
									<ol type="I">
										<li>寒訓</li>
										<li>寒訓盃</li>
									</ol>
								</li>
							</ul>
							<button value="submit">結帳</button>
						</div>
						
					</div> -->
                    <div class="panel panel-warning">
                        <div class="panel-heading">
                            <h3>設定優惠券 <button data-toggle="modal" data-target="#exampleModal2" class="add_button"><img width="40px" style="border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 1);" src="img/pencil.png"></button></h3>

                        </div>

                        <div class="panel-body">
                            <ul id="coupon_code_id">
                                <!-- <li>優惠券1</li>
								<li>2</li> -->
                            </ul>
                        </div>
                    </div>
                    <div class="panel panel-danger">
                        <div class="panel-heading">
                            <h3>FBL早餐店</h3>
                            <br>[海大店]
                        </div>

                        <div class="panel-body">
                            <ul id="boss_info">
                                <li>此處引入php店家資訊</li>
                                <li>此處引入php店家資訊</li>
                                <li>此處引入php店家資訊</li>
                                <li>此處引入php店家資訊</li>

                            </ul>
                        </div>
                    </div>


                </div>
            </aside>
        </div>
    </div>
    <hr>

    <!-- jQuery Plugin -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
    <div id="preloader">
        <div id="status"><img width="400px" src="img/loading.gif" /></div>
    </div>

    <!--頁尾-->
    <footer>
        <div class="container">
            <p>♂海洋大學&middot;資工系♀</p>
            <p style="text-align:right"><a href="#">T O P</a></p>

        </div>
    </footer>
    <!-- Modal -->
    <!-- Modal__edit_product -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="exampleModalLabel">更改餐點資訊</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
                </div>
                <div class="modal-body" id="DKK">
                    <form>
                        <div class="form-group">
                            <label for="edit_product_name" class="col-form-label">Product Name:</label>
                            <input type="text" class="form-control" id="edit_product_name"></input>
                        </div>
                        <div class="form-group">
                            <label for="edit_product_info" class="col-form-label">Product Info:</label>
                            <input class="form-control" id="edit_product_info"></input>
                        </div>
                        <div class="form-group">
                            <label for="edit_product_picture" class="col-form-label">Picture:</label>
                            <input class="form-control" id="edit_product_picture"></input>
                        </div>
                        <div class="form-group">
                            <label for="edit_product_price" class="col-form-label">Price:</label>
                            <input class="form-control" id="edit_product_price"></input>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="edit_product()" data-dismiss="modal">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal_add_product -->
    <div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="exampleModalLabel3">新增餐點</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
                </div>
                <div class="modal-body" id="DKK">
                    <form>
                        <div class="form-group">
                            <label for="add_product_name" class="col-form-label">Product Name:</label>
                            <input type="text" class="form-control" id="add_product_name"></input>
                        </div>
                        <div class="form-group">
                            <label for="add_product_info" class="col-form-label">Product Info:</label>
                            <input class="form-control" id="add_product_info"></input>
                        </div>
                        <div class="form-group">
                            <label for="add_product_picture" class="col-form-label">Picture:</label>
                            <input class="form-control" id="add_product_picture"></input>
                        </div>
                        <div class="form-group">
                            <label for="add_product_price" class="col-form-label">Price:</label>
                            <input class="form-control" id="add_product_price"></input>
                        </div>
                        <div class="form-group">
                            <label for="add_product_supply" class="col-form-label">Supply:</label>
                            <input class="form-control" id="add_product_supply" value="1"></input>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="add_product()" data-dismiss="modal">Save Addition</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal__set_coupon -->
    <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="exampleModalLabel">新增優惠券</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
                </div>
                <div class="modal-body" id="DKK">
                    <form>
                        <div class="form-group">
                            <label for="set_coupon_code" class="col-form-label">優惠券代碼:</label>
                            <input type="text" class="form-control" id="set_coupon_code" placeholder="任意輸入 Ex: 軟工100分"></input>
                        </div>
                        <div class="form-group">
                            <label for="set_coupon_mode" class="col-form-label">折扣方式(打折請輸入1、折錢請輸入0):</label>
                            <input class="form-control" id="set_coupon_mode" placeholder="0 or 1"></input>
                        </div>
                        <div class="form-group">
                            <label for="set_coupon_discount" class="col-form-label">折扣(若打折(請輸入0~1)):</label>
                            <input class="form-control" id="set_coupon_discount" placeholder="Ex: 150 or 0.7"></input>
                        </div>
                </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="set_coupon()" data-dismiss="modal">Save</button>
            </div>
        </div>
    </div>
    </div>

    <script>
        //全域變數
        let User_test = null;
        var i = 0; //display index
        var k = 0; //searching index
        var is_searching = 0;
        var searching_str = '';
        var product_name_Array = {};
        var product_info_Array = {};
        var product_picture_Array = {};
        var product_price_Array = {};
        var coupon_code = "";
        var clickPage = false;
        var edit_temp_name = '';

        function showMenu() {
            if (!clickPage) {
                i = 0;
            }
            const xmlhttp = new XMLHttpRequest();

            xmlhttp.onload = function() {
                var obj = this.responseText;
                //console.log(obj);
                obj = obj.substring(11, obj.length);
                //console.log(obj);
                var product = JSON.parse(obj);
                //console.log(product);
                var j = 0;
                for (; j < product.length; j++) {
                    product_name_Array[j] = product[j]["product_name"];
                    product_info_Array[j] = product[j]["product_info"];
                    product_picture_Array[j] = product[j]["product_pic"];
                    product_price_Array[j] = product[j]["product_price"];
                }
                //console.log(product[0]);
                //console.log(product[0].product_pic);
                document.getElementById("menu").innerHTML = '';
                var max = i + 6;
                //display remain product

                for (; i < max; i++) {
                    console.log("supply" + product[i]["product_supply"]);
                    if (product[i]["product_supply"] == '1') {

                        document.getElementById("menu").innerHTML += '<div class="col-sm-4" ><div class="thumbnail" ><img src="img/' + product[i]["product_pic"] + ' " alt="2" width="400" height="300" data-toggle="modal" data-target="#exampleModal" onclick = "set_modal_product(' + i + ')"> <p><strong style="font-size:150%">' + product[i]["product_name"] + '</strong></p> <p>' + product[i]["product_info"] + '</p><p>Price: ' + product[i]["product_price"] + '<br><br><label class="switch"><input type="checkbox" checked  id="' + product[i]["product_name"] + '_check" onclick="changeSupply(this.id)"><span class="slider round"></span></label><button  style="float: right;" class="btn_trash" id="' + product[i]["product_name"] + '"  onclick="delete_product(this.id)"><i class="fa fa-trash"></i></button></p></div></div>';
                    } else {
                        document.getElementById("menu").innerHTML += '<div class="col-sm-4" ><div class="thumbnail" ><img src="img/' + product[i]["product_pic"] + ' " alt="2" width="400" height="300" data-toggle="modal" data-target="#exampleModal" onclick = "set_modal_product(' + i + ')"> <p><strong style="font-size:150%">' + product[i]["product_name"] + '</strong></p> <p>' + product[i]["product_info"] + '</p><p>Price: ' + product[i]["product_price"] + '<br><br><label class="switch"><input type="checkbox"  id="' + product[i]["product_name"] + '_check" onclick="changeSupply(this.id)"><span class="slider round"></span></label><button  style="float: right;" class="btn_trash" id="' + product[i]["product_name"] + '"  onclick="delete_product(this.id)"><i class="fa fa-trash"></i></button></p></div></div>';
                    }
                }
                //supply switch
                //<label class="checkbox-inline"><input type="checkbox" checked data-toggle="toggle"> Supply </label>

            }
            xmlhttp.open("GET", "php/boss_display_menu.php");
            //xmlhttp.responseType = 'json';
            xmlhttp.send();
        }

        //
        function set_modal_product(p_index) {
            //document.getElementById("DKK").innerHTML = "hello edmund";
            edit_temp_name = product_name_Array[p_index];
            document.getElementById("edit_product_name").value = product_name_Array[p_index];
            document.getElementById("edit_product_info").value = product_info_Array[p_index];
            document.getElementById("edit_product_picture").value = product_picture_Array[p_index];
            document.getElementById("edit_product_price").value = product_price_Array[p_index];

        }

        function edit_product() {
            var edit_name = window.document.getElementById("edit_product_name").value;
            var edit_info = window.document.getElementById("edit_product_info").value;
            var edit_pic = window.document.getElementById("edit_product_picture").value;
            var edit_price = window.document.getElementById("edit_product_price").value;
            console.log("edit_info: " + edit_info);

            if (edit_name == '' || edit_info == '' || edit_pic == '' || edit_price == '') {
                window.alert("更改失敗，表格不得有空缺!");
                return;
            }

            const xmlhttp = new XMLHttpRequest();
            xmlhttp.onload = function() {
                showMenu();
            }
            xmlhttp.open("GET", "php/edit_product.php?product_name=" + edit_temp_name + "&edit_product_name=" + edit_name + "&edit_product_info=" + edit_info + "&edit_product_picture=" + edit_pic + "&edit_product_price=" + edit_price); //待php檢查
            xmlhttp.send();
        }
        //
        function changeSupply(sup_product_name) {
            var is_supply = document.getElementById(sup_product_name).checked;
            var supply_str = '';
            if (is_supply) {
                supply_str = '1';
            } else {
                supply_str = '0';
            }
            console.log("supply: " + supply_str);
            var tempName = sup_product_name.substring(0, sup_product_name.length - 6);
            console.log("supply tempName: " + tempName);
            const xmlhttp = new XMLHttpRequest();
            xmlhttp.onload = function() {}
            xmlhttp.open("GET", "php/supply.php?product_name=" + tempName + "&product_supply=" + supply_str); //待php檢查
            xmlhttp.send();
        }

        function add_product() {
            var add_name = document.getElementById("add_product_name").value;
            var add_info = document.getElementById("add_product_info").value;
            var add_pic = document.getElementById("add_product_picture").value;
            var add_price = document.getElementById("add_product_price").value;
            var add_supply = document.getElementById("add_product_supply").value;

            if (add_name == '' || add_info == '' || add_pic == '' || add_price == '' || add_supply == '') {
                window.alert("新增失敗，表格不得有空缺!");
                return;
            }

            const xmlhttp = new XMLHttpRequest();
            xmlhttp.onload = function() {
                console.log("onload: add product");
                clickPage = false;
                showMenu();
            }
            xmlhttp.open("GET", "php/add_menu_product.php?product_name=" + add_name + "&product_info=" + add_info + "&product_pic=" + add_pic + "&product_price=" + add_price + "&product_supply=" + add_supply); //待php改
            xmlhttp.send();
        }

        function delete_product(del_product_name) {
            var x = window.prompt('確定要刪除此項product嗎?(確定請輸入"YES")');
            if (x == "YES") {
                console.log(del_product_name);
                const xmlhttp = new XMLHttpRequest();
                xmlhttp.onload = function() {
                    console.log("onload: deleteFunction");
                    clickPage = false;
                    showMenu();
                }
                xmlhttp.open("GET", "php/delete_product.php?product_name=" + del_product_name);
                xmlhttp.send();
            } else
                return;
        }
        // <i class="fas fa-pencil-alt" style="float: right;" onclick="edit_product()" style="font-size: 24px;"></i>

        function page1() {
            clickPage = true;
            i = 0;
            k = 0;
            if (is_searching) {
                searching_function(searching_str);
            } else {
                showMenu();
            }
        }

        function page2() {
            clickPage = true;
            i = 6;
            k = 6;
            if (is_searching) {
                searching_function(searching_str);
            } else {
                showMenu();
            }
        }

        function page3() {
            clickPage = true;
            i = 12;
            k = 12;
            if (is_searching) {
                searching_function(searching_str);
            } else {
                showMenu();
            }
        }

        function page4() {
            clickPage = true;
            i = 18;
            k = 18;
            if (is_searching) {
                searching_function(searching_str);
            } else {
                showMenu();
            }
        }

        function page5() {
            clickPage = true;
            i = 24;
            k = 24;
            if (is_searching) {
                searching_function(searching_str);
            } else {
                showMenu();
            }
        }

        function searching_function(str) {
            if (!clickPage) {
                k = 0;
            }
            clickPage = false;
            searching_str = str;
            if (str.length == 0) {
                i = 0;
                is_searching = 0;
                showMenu();
                return;
            }
            is_searching = 1;
            console.log(str);
            const xmlhttp = new XMLHttpRequest();
            xmlhttp.onload = function() {
                var obj = this.responseText;
                obj = obj.substring(11, obj.length);
                var product_searching = JSON.parse(obj);

                for (var j = 0; j < product_searching.length; j++) {
                    product_name_Array[j] = product_searching[j]["product_name"];
                    product_info_Array[j] = product_searching[j]["product_info"];
                    product_picture_Array[j] = product_searching[j]["product_pic"];
                    product_price_Array[j] = product_searching[j]["product_price"];
                }
                var max = product_searching.length;
                if (product_searching.length > 6) {
                    max = k + 6;
                }
                document.getElementById("menu").innerHTML = '';
                for (; k < max; k++) {
                    if (product_searching[k]["product_supply"] == '1') {

                        document.getElementById("menu").innerHTML += '<div class="col-sm-4" ><div class="thumbnail" ><img src="img/' + product_searching[k]["product_pic"] + ' " alt="2" width="400" height="300" data-toggle="modal" data-target="#exampleModal" onclick = "set_modal_product(' + k + ')"> <p><strong style="font-size:150%">' + product_searching[k]["product_name"] + '</strong></p> <p>' + product_searching[k]["product_info"] + '</p><p>Price: ' + product_searching[k]["product_price"] + '<br><br><label class="switch"><input type="checkbox" checked  id="' + product_searching[k]["product_name"] + '_check"  onclick="changeSupply(this.id)"><span class="slider round"></span></label><button  style="float: right;" class="btn_trash" id="' + product_searching[k]["product_name"] + '_checkbox" onclick="delete_product(this.id)"><i class="fa fa-trash"></i></button></p></div></div>';
                    } else {
                        document.getElementById("menu").innerHTML += '<div class="col-sm-4" ><div class="thumbnail" ><img src="img/' + product_searching[k]["product_pic"] + ' " alt="2" width="400" height="300" data-toggle="modal" data-target="#exampleModal" onclick = "set_modal_product(' + k + ')"> <p><strong style="font-size:150%">' + product_searching[k]["product_name"] + '</strong></p> <p>' + product_searching[k]["product_info"] + '</p><p>Price: ' + product_searching[k]["product_price"] + '<br><br><label class="switch"><input type="checkbox"  id="' + product_searching[k]["product_name"] + '_check"  onclick="changeSupply(this.id)"><span class="slider round"></span></label><button  style="float: right;" class="btn_trash" id="' + product_searching[k]["product_name"] + '_checkbox" onclick="delete_product(this.id)"><i class="fa fa-trash"></i></button></p></div></div>';
                    }
                    //k++;
                }
                //document.getElementById("totalPrice").innerHTML = sum;

            }

            xmlhttp.open("GET", "php/searching.php?q=" + str);
            xmlhttp.send();
        }

        function showCoupon() {
            //
            const xmlhttp = new XMLHttpRequest();
            xmlhttp.onload = function() {
                var obj = this.responseText;

                obj = obj.substring(11, obj.length);
                //console.log(obj);
                var coupon_info = JSON.parse(obj);
                //console.log(coupon_info);
                var index = 0;
                document.getElementById("coupon_code_id").innerHTML = '';
                while (coupon_info[index] != null) {
                    //console.log(typeof (coupon_info[index].is_persentoff));
                    //console.log(coupon_info[index].is_persentoff);
                    if (coupon_info[index].is_persentoff == 1) {
                        var disc = coupon_info[index].num * 10;
                        //console.log("disc: " + disc);
                        document.getElementById("coupon_code_id").innerHTML += "<li>" + coupon_info[index].coupon_code + "<span style='float: right;'>" + disc + "折<button id='" + coupon_info[index].coupon_code + "' onclick='delete_coupon(this.id)' style='float: right;' class='btn_trash2' ><i class='fa fa-trash'></i></button></span></li>";
                    } else {
                        document.getElementById("coupon_code_id").innerHTML += "<li>" + coupon_info[index].coupon_code + "<span style='float: right;'>-" + coupon_info[index].num + "$<button id='" + coupon_info[index].coupon_code + "' onclick='delete_coupon(this.id)' style='float: right;' class='btn_trash2' ><i class='fa fa-trash'></i></button></span></li>";
                    }
                    index++;
                }
                //console.log(product_name_Array[button_index]);
            }
            xmlhttp.open("GET", "php/show_coupon.php");
            xmlhttp.send();
        }

        function set_coupon() {
            var coup_code = document.getElementById("set_coupon_code").value;
            var is_per = document.getElementById("set_coupon_mode").value;
            var num = document.getElementById("set_coupon_discount").value;

            if (coup_code == '' || is_per == '' || num == '') {
                window.alert("新增失敗，表格不得有空缺!");
                return;
            }
            // console.log("coup_code: "+coup_code);
            // console.log("_is_per: "+is_per);
            // console.log("num: "+num);
            const xmlhttp = new XMLHttpRequest();
            xmlhttp.onload = function() {
                //console.log("onload entry");
                showCoupon();
            }
            xmlhttp.open("GET", "php/set_coupon.php?coupon_code=" + coup_code + "&num=" + num + "&is_persentoff=" + is_per);
            xmlhttp.send();

        }

        function delete_coupon(del_coupon_code) {
            const xmlhttp = new XMLHttpRequest();
            xmlhttp.onload = function() {
                showCoupon();
            }
            xmlhttp.open("GET", "php/delete_coupon.php?coupon_code=" + del_coupon_code);
            xmlhttp.send();
        }

        function showBossInfo() {
            const xmlhttp = new XMLHttpRequest();
            xmlhttp.onload = function() {
                    var obj = this.responseText;
                    obj = obj.substring(11, obj.length);
                    var boss_info = JSON.parse(obj);
                    console.log(boss_info);
                    document.getElementById("boss_info").innerHTML = '<li> 店名: ' + boss_info["0"]["store_name"] + '</li>';
                    document.getElementById("boss_info").innerHTML += '<li> 地址: ' + boss_info["0"]["store_address"] + '</li>';
                    document.getElementById("boss_info").innerHTML += '<li> 電話: ' + boss_info["0"]["store_phone"] + '</li>';
                    /*因為評分功能來不及做，先註解*/
                    // document.getElementById("boss_info").innerHTML += '<li> 評分: ' + boss_info["0"]["score"] + '</li>';
                } //<li>此處引入php店家資訊</li>
            xmlhttp.open("GET", "php/display_boss_info.php");
            xmlhttp.send();
        }

        function signout() {
            window.location.href = "store_owner_sign_in.html";

        }

        function check_login() {
            User_test = localStorage.getItem("user_account");
            if (User_test == null) {
                alert("尚未登入");
                location.href = 'store_owner_sign_in.html';
            } else {
                document.getElementById("hi").innerHTML = "Hi! " + User_test + "~";
                document.getElementById("logInOut").innerHTML += '<li><a href="#" onclick="logout()">Sign out</a></li>';
            }
        }

        function logout() {
            localStorage.clear();
            window.location.href = "store_owner_sign_in.html";
        }

        function start() {
            i = 0;
            check_login();
            showCoupon();
            showMenu();
            showBossInfo();
            //console.log(Date.now);
        }

        $(window).load(function() { // 確認整個頁面讀取完畢再將這三個div隱藏起來
            $("#status").delay(2000).fadeOut(500); //delay --> 延遲幾秒才fadeOut
            $("#preloader").delay(2000).fadeOut(500);
        })
        window.addEventListener("load", start, false);
    </script>
</body>

</html>